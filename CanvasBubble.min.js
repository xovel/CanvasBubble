/**!
 * CanvasBubble
 * A plugin for setting bubble-background of an element using canvas.
 * author: xovel
 * last update: 2016-08-04 16:43:52
 * License: MIT
 */+function(e,r,t){var o={hexToRgb:function(e){if(e.length===4){e="#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3)}var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:{r:255,g:255,b:255}},_toHex:function(e){var r=e.toString(16);return r.length===1?"0"+r:r},rgbToHex:function(e,r,t){return"#"+o._toHex(e)+o._toHex(r)+o._toHex(t)}};var a=function(e,r){return Math.random()*(r-e)+e};var n=function(e,r){for(var t in r){e[t]=r[t]}return e};var i=function(e,t){return!e?null:!t?r.querySelector(e):r.querySelectorAll(e)};var s=function(e,r,t){e.addEventListener(r,t,false)};var f=function(e,t){t=t||"div";var o=r.createElement(t);if(!!e){o.className=e}return o};var c=function(e,r){var t=f(r);t.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(t);return t};var l=function(e,r){for(var t in r){e.style[t]=r[t]}};var d=function(e){return{width:e.offsetWidth,height:e.offsetHeight}};var h=function(e,r){var o,a=0,n=e.length;if(n===t){for(a in e){if(false===r.call(e[a],a,e[a]))break}}else{for(;a<n;a++){if(false===r.call(e[a],a,e[a]))break}}return e};var u=function(r){r=n({selector:"body",num:30,size:30,colors:["#ffffff","#e1e1e1","27,27,27"],border:false,borderColors:["#f00","#0f0","#00f"],shape:"circle",scale:[.5,1],opacity:[.1,1],speedX:[-1,1],speedY:[-1,1],rotate:[.05,.8],canvasOpacity:.95,wrap:false,fps:60},r||{});var t=i(r.selector);var u=d(t);l(t,{position:"relative",overflow:"hidden"});if(r.wrap){var v=c(t);l(v,{position:"absolute",zIndex:2,width:"100%"})}var p=f("","canvas");l(p,{position:"absolute",top:0,left:0,zIndex:1});t.appendChild(p);if(r.canvasOpacity){l(p,{opacity:r.canvasOpacity})}var b=p.getContext("2d");h(r.colors,function(e,t){if(t.substr(0,1)==="#"){var a=o.hexToRgb(t);r.colors[e]=a.r+","+a.g+","+a.b}});h(r.borderColors,function(e,t){if(t.substr(0,1)==="#"){var a=o.hexToRgb(t);r.borderColors[e]=a.r+","+a.g+","+a.b}});var g=[];function x(){for(var e=0;e<r.num;++e){var t=r.colors[~~a(0,r.colors.length)];var o=r.borderColors[~~a(0,r.borderColors.length)];var n=a(r.opacity[0],r.opacity[1]);g[e]={scale:a(r.scale[0],r.scale[1]),x:a(0,u.width),y:a(0,u.height),rotation:0,speedX:a(r.speedX[0],r.speedX[1]),speedY:a(r.speedY[0],r.speedY[1]),speedR:a(r.rotate[0],r.rotate[1]),color:"rgba("+t+","+n+")",opacity:n,borderColor:"rgb("+o+")"}}y()}function y(){setInterval(function(){b.clearRect(0,0,u.width,u.height);for(var e=0;e<r.num;++e){var t=g[e];t.x+=t.speedX;t.y+=t.speedY;var o=r.size*t.scale;if(t.x>u.width+o||t.y>u.height+o||t.x<-(o*1.5)||t.y<-(o*1.5)){w(t)}else{C(t)}}},1e3/r.fps)}function w(e){var t=a(0,1);var o=r.size*e.scale;if(t>.5){e.x=e.speedX>0?-t:u.width+t;e.y=a(0,u.height)}else{e.x=a(0,u.width);e.y=e.speedY>0?-t:u.height+t}C(e)}function C(e){b.fillStyle=e.color;if(r.border){b.strokeStyle=e.borderColor;b.stroke()}b.beginPath();e.rotation+=e.speedR;b.save();b.translate(e.x,e.y);b.rotate(e.rotation*Math.PI/180);var t=r.size*e.scale;var o=t/2;if(r.shape==="circle"){b.arc(-o,-o,t,0,2*Math.PI,false)}else{b.fillRect(-o,-o,t,t)}b.restore();b.fill()}x();function m(){u=d(t);l(p,{width:u.width+"px",height:u.height+"px"})}m();s(e,"resize",m)};u.util={color:o,random:a,on:s,extend:n,$:i};e.CanvasBubble=u;if(typeof define==="function"&&define.amd){define("CanvasBubble",[],function(){return u})}}(window,document);